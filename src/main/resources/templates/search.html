<!DOCTYPE html>
<html lang="kr" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/main.css">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="_csrf" content="${_csrf.token}" />
    <meta name="_csrf_header" content="${_csrf.headerName}" />
    <title>search - A-startrip</title>
    <script type="module">
        let page = parseInt([[${ page }]])
        function search() {
            let inputQuery = document.querySelector("#inputQuery").value
            if (inputQuery == "") {
                inputQuery = "board"
            }
            inputQuery = encodeURIComponent(inputQuery)
            location.href = "/search/" + inputQuery + "/0"
        }
        window.search = search

        document.querySelector("form").addEventListener('submit', function (event) {
            event.preventDefault();
        })

        function nextpage() {
            let inputQuery = document.querySelector("#inputQuery").value
            inputQuery = encodeURIComponent(inputQuery)
            page = page + 1
            location.href = "/search/" + inputQuery + "/" + page
        }
        window.nextpage = nextpage
    </script>
</head>

<body>
    <div th:replace="~{/fragment/nav :: nav}"></div>
    <div class="form-container">
        <h1 class="loginTitle">ê²€ìƒ‰</h1>
        <form class="form">
            <div class="form-group">
                <label for="inputQuery">ê²€ìƒ‰ì–´ ì…ë ¥</label>
                <input type="text" id="inputQuery" name="inputQuery" class="form-control" autofocus
                    placeholder="ê²€ìƒ‰ì–´... ì œëª©, ì‘ì„±ì, email, ê²Œì‹œê¸€ ë²ˆí˜¸" th:value="${inputQuery}" />
            </div>
            <div class="form-actions">
                <button type="button" class="small-button" onclick="location.href='/'">ì·¨ì†Œ</button>
                <button type="button" class="button" onclick="search()">ê²€ìƒ‰</button>
            </div>

        </form>
    </div>
    <main>
        <div class="grid" style="
    grid-template-columns: repeat(1, 1fr);
    ">
            <div class="grid-item" style="max-width: 700px;">
                <h1 id="ArticleH1">ê²€ìƒ‰ ê²°ê³¼</h1>
                <div class="grid-article" style="overflow-y:scroll">
                    <th:block th:if="${articles != null}">
                        <!-- ê²Œì‹œíŒ -->
                        <th:block th:each="article : ${articles}">
                            <a class="grid-item" th:href="@{/article/{articleNum}(articleNum=${article.num})}">

                                <div class="article-title">
                                    <!-- [<label>[[${article.num}]]</label>]
                                &nbsp;&nbsp;&nbsp;&nbsp; -->
                                    [[${article.title}]]
                                </div>
                                <div class="article-writer">
                                    <label>âœï¸ [[${article.writer}]]</label>
                                    &nbsp;
                                    <label>ğŸ‘€ [[${article.hit}]]</label>íšŒ
                                </div>

                            </a>
                        </th:block>
                        <!-- ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼-->
                        <a class="grid-item" onclick="nextpage()">

                            <div class="article-title">ë‹¤ìŒ >></div>

                        </a>
                    </th:block>
                </div>
            </div>

        </div>
    </main>

    <footer th:replace="~{/fragment/footer :: footer}"></footer>
</body>

</html>